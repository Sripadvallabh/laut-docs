test_section
=============

Adds a new blitz test section.

Basic usage
-----------

All autogenerated blitz action snippets fall under a particular blitz test section.
If no test section was added by invoking this command, all autogenerated blitz snippets
by default fall under a test section called 'default' created by LAUT itself.
Once we invoke the command ``test_section <SECTION_NAME>``, LAUT creates a new blitz test
section called 'SECTION_NAME' and starts adding newly autogenerated blitz action snippets
under this test section.

Following example shows how test sections work:

.. code-block:: console

   (lӓut-host1) configure no logging console
   2024-07-29 20:14:51: %LAUT-INFO: +..............................................................................+
   2024-07-29 20:14:51: %LAUT-INFO: :                  Configure 'no logging console' on 'host1'                   :
   2024-07-29 20:14:51: %LAUT-INFO: +..............................................................................+
   
   2024-07-29 20:14:51,825: %UNICON-INFO: +++ host1 with via 'a': configure +++
   config term
   Enter configuration commands, one per line.  End with CNTL/Z.
   host1(config)#no logging console
   host1(config)#end
   host1#
   (lӓut-host1) test_section new_1
   (lӓut-host1)
   (lӓut-host1) execute show ip route -i
   2024-07-29 20:15:08: %LAUT-INFO: +..............................................................................+
   2024-07-29 20:15:08: %LAUT-INFO: :                      Execute 'show ip route' on 'host1'                      :
   2024-07-29 20:15:08: %LAUT-INFO: +..............................................................................+
   
   2024-07-29 20:15:08,160: %UNICON-INFO: +++ host1 with via 'a': executing command 'show ip route' +++
   show ip route
   Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
          D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
          N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
          E1 - OSPF external type 1, E2 - OSPF external type 2, m - OMP
          n - NAT, Ni - NAT inside, No - NAT outside, Nd - NAT DIA
          i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
          ia - IS-IS inter area, * - candidate default, U - per-user static route
          H - NHRP, G - NHRP registered, g - NHRP registration summary
          o - ODR, P - periodic downloaded static route, l - LISP
          a - application route
          + - replicated route, % - next hop override, p - overrides from PfR
          & - replicated local route overrides by connected
   
   Gateway of last resort is not set
   
         1.0.0.0/32 is subnetted, 1 subnets
   C        1.1.1.1 is directly connected, Loopback30
   host1#
   2024-07-29 20:15:08: %LAUT-INFO: +..............................................................................+
   2024-07-29 20:15:08: %LAUT-INFO: :                                   INCLUDE                                    :
   2024-07-29 20:15:08: %LAUT-INFO: +..............................................................................+
   Enter pattern to INCLUDE (Press enter for multiple patterns): 1.1.1.1
   (lӓut-host1)
   (lӓut-host1) test_section new_2
   (lӓut-host1)
   (lӓut-host1) sleep 5
   2024-07-29 20:15:16: %LAUT-INFO: +------------------------------------------------------------------------------+
   2024-07-29 20:15:16: %LAUT-INFO: :                             Sleep for 5 seconds                              :
   2024-07-29 20:15:16: %LAUT-INFO: +------------------------------------------------------------------------------+
   (lӓut-host1)

In the above example, 2 test sections named 'new_1' and 'new_2' were created to isolate
``execute show ip route`` and ``sleep`` respectively. On saving the testcase, we observe
the below blitz testcase YAML:

.. code-block:: yaml

   # sample.yaml
   # 29 July 2024
   # LAUT Generated testcase
   sample:
     source:
       pkg: genie.libs.sdk
       class: triggers.blitz.blitz.Blitz
     devices:
       - host1
     test_sections:
       - default:
           - configure:
               device: host1
               command: no logging console
       - new_1:
           - execute:
               device: host1
               command: show ip route
               include:
                 - 1.1.1.1
       - new_2:
           - sleep:
               sleep_time: 5

Observe the *'execute'* and *'sleep'* actions being added under the test sections 'new_1' and
'new_2' respectively. Also note that *'configure'* action done prior to creating any new
test section via ``test_section`` command was added(by default) under the test section 'default'.

In a nutshell, test sections essentially isolate a group of blitz actions that all perform one common
task in a testcase which would make a blitz testcase more readable and makes the AUT task log result
much more easier to debug. In terms of functionality as to what operations are done on network devices,
they do not change anything at all.
